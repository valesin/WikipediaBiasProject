Bootstrap: docker
From: ubuntu:22.04

%labels
    Maintainer vsin
    Version v1

%post
    # Update system & install Python and pip
    apt-get update && apt-get install -y python3 python3-pip

    # Install requirements (here you can copy your requirements.txt before build)
    if [ -f /opt/src/requirements.txt ]; then
        pip3 install --no-cache-dir -r /opt/src/requirements.txt
    fi

    # Optional: install additional packages if needed
    # apt-get install -y <other-packages>

%files
    ./src /opt/src
    ./data /data

%environment
    export PYTHONPATH=/opt/src
    export LC_ALL=C.UTF-8

%runscript
    # Entrypoint for the container
    # Usage: apptainer run container.sif <input_file> <output_file>
    python3 /opt/src/graphbuildingmain.py "$@"